"use strict";(self.webpackChunkyourdoggo=self.webpackChunkyourdoggo||[]).push([[21,186],{5767:(e,t,r)=>{r.d(t,{A:()=>c});var n=r(4848),a=r(6540),o=r(77),l=r(5288);const c=(0,a.forwardRef)((function(e,t){e.imgText;var r=e.handleChange,a=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r}(e,["imgText","handleChange"]),c=(0,l.t)(),i=c.imgLink,u=c.isError,s=c.debouncedHandler,f=c.handleImageLoad,d=c.handleImageError;return(0,n.jsxs)("div",{children:[(0,n.jsx)(o.A,{type:"text",placeholder:"Вставьте ссылку на изображение",onChange:function(e){s(e),r(e.target.value)},className:a.className}),i&&!u&&(0,n.jsx)("img",{src:i,alt:"Иллюстрация",onLoad:f,onError:d}),u&&(0,n.jsx)("p",{children:"Ошибка загрузки изображения. Проверьте ссылку."})]})}))},77:(e,t,r)=>{r.d(t,{A:()=>c});var n=r(4848),a=r(6540);const o={input:"qIxXL6mW"};var l=function(){return l=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},l.apply(this,arguments)};const c=(0,a.forwardRef)((function(e,t){var r=e.className,a=void 0===r?"":r,c=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r}(e,["className"]),i=[o.input,a].join(" ");return(0,n.jsx)("input",l({type:"text",className:i},c,{ref:t}))}))},1394:(e,t,r)=>{r.d(t,{A:()=>s});var n=r(4848),a=r(780);const o=function(e){var t=e.tag,r=e.handleRemove;return(0,n.jsx)(a.A,{className:"WDYhK9vV",onClick:r,children:t})};var l=r(9785),c=r(6540),i=function(){return i=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},i.apply(this,arguments)},u=function(e,t,r){if(r||2===arguments.length)for(var n,a=0,o=t.length;a<o;a++)!n&&a in t||(n||(n=Array.prototype.slice.call(t,0,a)),n[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))};const s=function(e){var t=e.setItemList,r=(0,l.mN)(),a=r.register,s=r.getValues,f=r.resetField,d=(0,c.useState)([]),p=d[0],h=d[1];return(0,c.useEffect)((function(){t(p)}),[p]),(0,n.jsxs)("div",{className:"IQu64fxn",children:[!!p.length&&(0,n.jsx)(n.Fragment,{children:p.map((function(e,t){return(0,n.jsx)(o,{tag:e,handleRemove:(r=e,function(){h(p.filter((function(e){return e!==r})))})},e+t);var r}))}),(0,n.jsx)("input",i({type:"text"},a("tag",{required:!1,minLength:3,maxLength:25}),{onBlur:function(){var e=s("tag");e.trim().length&&(h(u(u([],p,!0),[e],!1)),f("tag"))},placeholder:"Тег"}))]})}},5288:(e,t,r)=>{r.d(t,{t:()=>a});var n=r(6540),a=function(){var e,t,r,a=(0,n.useState)(""),o=a[0],l=a[1],c=(0,n.useState)(!1),i=c[0],u=c[1],s=function(e){l(e.target.value),u(!1)},f=(e=s,500,t=(0,n.useRef)(null),r=(0,n.useCallback)((function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];t.current&&clearTimeout(t.current),t.current=setTimeout((function(){e.apply(void 0,r)}),500)}),[e,500]),r);return{imgLink:o,isError:i,debouncedHandler:f,handleInputChange:s,handleImageLoad:function(){u(!1)},handleImageError:function(){u(!0)}}}},9726:(e,t,r)=>{r.d(t,{w:()=>o});var n=r(6540),a=r(7767),o=function(e,t,r){void 0===r&&(r=[]);var o=(0,a.Zp)();(0,n.useEffect)((function(){e||o(t)}),function(e,t,r){if(r||2===arguments.length)for(var n,a=0,o=t.length;a<o;a++)!n&&a in t||(n||(n=Array.prototype.slice.call(t,0,a)),n[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))}([e],r,!0))}},7021:(e,t,r)=>{r.r(t),r.d(t,{default:()=>b});var n=r(4848),a=r(3393);const o="SO9GLe4c",l="SylOxyIQ";var c=r(4833),i=r(77),u=r(1394),s=r(780),f=r(4303),d=r(9726),p=r(9785),h=r(7767),g=r(6186),y=r(148),m=r(5767),v=function(){return v=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},v.apply(this,arguments)},x=y.Q.Gallery;const b=function(){var e=(0,c.g0)()[0],t=(0,h.Zp)(),r=(0,p.mN)(),y=r.register,b=r.control,j=r.handleSubmit,O=r.formState,I=O.errors,w=O.isSubmitting,A=r.getValues,N=(0,f.G)((function(e){return e.auth.userId}));(0,d.w)(!!N,"/".concat(g.default));var L=[];return(0,n.jsx)(a.A,{additionalStyles:"i3ecE0MA",children:(0,n.jsxs)("section",{className:"Whs7DGJg",children:[(0,n.jsx)("h1",{className:"OTC6SDun",children:"Добавление изображения"}),(0,n.jsxs)("form",{onSubmit:j((function(r){return n=void 0,a=void 0,l=function(){var r,n;return function(e,t){var r,n,a,o,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(c){return function(i){return function(c){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(l=0)),l;)try{if(r=1,n&&(a=2&c[0]?n.return:c[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,c[1])).done)return a;switch(n=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return l.label++,{value:c[1],done:!1};case 5:l.label++,n=c[1],c=[0];continue;case 7:c=l.ops.pop(),l.trys.pop();continue;default:if(!((a=(a=l.trys).length>0&&a[a.length-1])||6!==c[0]&&2!==c[0])){l=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){l.label=c[1];break}if(6===c[0]&&l.label<a[1]){l.label=a[1],a=c;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(c);break}a[2]&&l.ops.pop(),l.trys.pop();continue}c=t.call(e,l)}catch(e){c=[6,e],n=0}finally{r=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,i])}}}(this,(function(a){switch(a.label){case 0:return r=A("title"),n=A("imgLink"),[4,e({userId:N,title:r,imgLink:n,tags:L})];case 1:return"data"in a.sent()&&t("/".concat(x)),[2]}}))},new((o=void 0)||(o=Promise))((function(e,t){function r(e){try{i(l.next(e))}catch(e){t(e)}}function c(e){try{i(l.throw(e))}catch(e){t(e)}}function i(t){var n;t.done?e(t.value):(n=t.value,n instanceof o?n:new o((function(e){e(n)}))).then(r,c)}i((l=l.apply(n,a||[])).next())}));var n,a,o,l})),children:[(0,n.jsx)(i.A,v({className:o,placeholder:"Заголовок"},y("title",{maxLength:{value:45,message:"Заголовок должен быть не более 45 символов"}}))),(0,n.jsx)("p",{className:l,children:I.title&&"".concat(I.title.message)}),(0,n.jsx)(p.xI,{name:"imgLink",control:b,defaultValue:"",rules:{required:"Это поле не должно быть пустым",minLength:1},render:function(e){var t=e.field;return(0,n.jsx)(m.A,v({imgText:"Обложка",placeholder:"Картинка превью (ссылка)",className:o,handleChange:t.onChange},t))}}),(0,n.jsx)("p",{className:l,children:I.imgLink&&"".concat(I.imgLink.message)}),(0,n.jsx)(u.A,{setItemList:function(e){L=function(e,t,r){if(r||2===arguments.length)for(var n,a=0,o=t.length;a<o;a++)!n&&a in t||(n||(n=Array.prototype.slice.call(t,0,a)),n[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))}([],e,!0)}}),(0,n.jsx)(s.A,{type:"submit",disabled:w,children:"Опубликовать"})]})]})})}},6186:(e,t,r)=>{r.r(t),r.d(t,{default:()=>g});var n=r(4848),a=r(3393);const o="NwjWOQzm",l="vlL6UlkF",c="EWbT2uVY";var i=r(780),u=r(6540),s=r(4303),f=r(7767),d=r(4976),p=r(821),h=r(148);const g=function(){var e=(0,u.useState)(""),t=e[0],r=e[1],g=(0,u.useState)(""),y=g[0],m=g[1],v=(0,f.Zp)(),x=(0,s.G)((function(e){return e.auth.userId}));(0,u.useEffect)((function(){x&&v("/".concat(h.Q.Profile))}),[x]);var b=function(e){var t=(0,s.j)(),r=(0,s.G)((function(e){return e.auth.userLogin})),n=(0,s.G)((function(e){return e.auth.userId})),a=(0,s.G)((function(e){return e.auth.error}));return(0,u.useEffect)((function(){localStorage.setItem("userLogin",r),localStorage.setItem("userId",n)}),[n]),[function(){t((0,p.h)(e))},a]}({login:t,password:y}),j=b[0],O=b[1];if(!x)return(0,n.jsx)("div",{className:"It6MD1kT",children:(0,n.jsx)(a.A,{children:(0,n.jsx)("div",{className:"naF9XI1H",children:(0,n.jsxs)("form",{className:"m5YeBzEl",children:[(0,n.jsxs)("div",{className:o,children:[(0,n.jsx)("input",{type:"text",className:l,placeholder:"Логин",value:t,onChange:function(e){return r(e.target.value)}}),(0,n.jsx)("small",{className:c,children:"LOGIN_ERROR"===O&&"Неверный логин"})]}),(0,n.jsxs)("div",{className:o,children:[(0,n.jsx)("input",{type:"password",className:l,placeholder:"Пароль",value:y,onChange:function(e){return m(e.target.value)}}),(0,n.jsx)("small",{className:c,children:"PASSWORD_ERROR"===O&&"Неверный пароль"})]}),(0,n.jsxs)("div",{className:"LVS2Bz9u",children:[(0,n.jsx)(i.A,{variant:"outlined",type:"button",onClick:j,children:"Войти"}),(0,n.jsx)(d.N_,{to:"",className:"HZxne8b_",children:"Не зарегистрированны? Создайте аккаунт!"})]})]})})})})}},4833:(e,t,r)=>{r.d(t,{VL:()=>s,g0:()=>f});var n=r(6327),a=r(8023),o=r(8324),l=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r},c=o.BH.GALLERY,i=o.BH.CREATE,u=a.s.injectEndpoints({endpoints:function(e){return{fetchAllGalleryImages:e.query({query:function(e){var t=e.limit,r=e.page,n=e.userLogin,a=e.userId,o=e.authUserId,l=e.textQuery,i=e.liked;return{url:"".concat(c),method:"POST",params:{sortByDate:!0,limit:t,page:r,userLogin:n,search:l,liked:i||"",userId:a},body:{authUserId:o}}},transformResponse:function(e,t){var r,n,a=null===(n=null===(r=null==t?void 0:t.response)||void 0===r?void 0:r.headers)||void 0===n?void 0:n.get("X-Total-Count");return{data:e,totalCount:a?+a:1}},serializeQueryArgs:function(e){var t=e.endpointName,r=e.queryArgs,n=(r.page,l(r,["page"]));return JSON.stringify(n)+t},merge:function(e,t,r){var n,a=r.arg,o=r.requestId;1===a.page?e.data=t.data:o&&(n=e.data).push.apply(n,t.data)},forceRefetch:function(e){var t=e.currentArg,r=e.previousArg;if(!t||!r)return!0;var a=t.page,o=l(t,["page"]),c=r.page,i=l(r,["page"]);return(0,n.A)(o,i)&&a!==c}}),fetchGalleryImageById:e.query({query:function(e){return{url:"".concat(c,"/").concat(e)}}}),createGalleryImg:e.mutation({query:function(e){return{url:"".concat(c).concat(i),method:"POST",body:e}}})}}}),s=u.useFetchAllGalleryImagesQuery,f=(u.useFetchGalleryImageByIdQuery,u.useCreateGalleryImgMutation);u.useLazyFetchAllGalleryImagesQuery,u.useLazyFetchGalleryImageByIdQuery},6327:(e,t,r)=>{function n(e,t){var r=Object.entries(e),n=Object.entries(t);if(r.length!==n.length)return!1;for(var a=0;a<r.length;++a)if(r[a][0]!==n[a][0]||r[a][1]!==n[a][1])return!1;return!0}r.d(t,{A:()=>n})}}]);
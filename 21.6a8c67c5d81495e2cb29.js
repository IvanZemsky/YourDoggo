"use strict";(self.webpackChunkwebpack_react_ts_preset_1=self.webpackChunkwebpack_react_ts_preset_1||[]).push([[21,186],{7021:(e,t,n)=>{n.r(t),n.d(t,{default:()=>b});var r=n(4848),a=n(3393);const s="SO9GLe4c",c="SylOxyIQ";var l=n(4984),i=n(77),o=n(1394),u=n(2374),f=n(4303),h=n(9726),d=n(9785),p=n(7767),m=n(6186),v=n(148),g=function(){return g=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},g.apply(this,arguments)},x=v.Q.Gallery;const b=function(){var e=(0,l.g0)()[0],t=(0,p.Zp)(),n=(0,d.mN)(),v=n.register,b=n.handleSubmit,y=n.formState,j=y.errors,N=y.isSubmitting,w=n.getValues,k=(0,f.G)((function(e){return e.auth.userId}));(0,h.w)(!!k,"/".concat(m.default));var S=[];return(0,r.jsx)(a.A,{additionalStyles:"i3ecE0MA",children:(0,r.jsxs)("section",{className:"Whs7DGJg",children:[(0,r.jsx)("h1",{className:"OTC6SDun",children:"Добавление изображения"}),(0,r.jsxs)("form",{onSubmit:b((function(n){return r=void 0,a=void 0,c=function(){var n,r;return function(e,t){var n,r,a,s,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function l(l){return function(i){return function(l){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,l[0]&&(c=0)),c;)try{if(n=1,r&&(a=2&l[0]?r.return:l[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,l[1])).done)return a;switch(r=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return c.label++,{value:l[1],done:!1};case 5:c.label++,r=l[1],l=[0];continue;case 7:l=c.ops.pop(),c.trys.pop();continue;default:if(!((a=(a=c.trys).length>0&&a[a.length-1])||6!==l[0]&&2!==l[0])){c=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){c.label=l[1];break}if(6===l[0]&&c.label<a[1]){c.label=a[1],a=l;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(l);break}a[2]&&c.ops.pop(),c.trys.pop();continue}l=t.call(e,c)}catch(e){l=[6,e],r=0}finally{n=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,i])}}}(this,(function(a){switch(a.label){case 0:return n=w("title"),r=w("imgLink"),[4,e({userId:k,title:n,imgLink:r,tags:S})];case 1:return"data"in a.sent()&&t("/".concat(x)),[2]}}))},new((s=void 0)||(s=Promise))((function(e,t){function n(e){try{i(c.next(e))}catch(e){t(e)}}function l(e){try{i(c.throw(e))}catch(e){t(e)}}function i(t){var r;t.done?e(t.value):(r=t.value,r instanceof s?r:new s((function(e){e(r)}))).then(n,l)}i((c=c.apply(r,a||[])).next())}));var r,a,s,c})),children:[(0,r.jsx)(i.A,g({className:s,placeholder:"Заголовок"},v("title",{maxLength:{value:45,message:"Заголовок должен быть не более 45 символов"}}))),(0,r.jsx)("p",{className:c,children:j.title&&"".concat(j.title.message)}),(0,r.jsx)(i.A,g({className:s,placeholder:"Изображение (ссылка)"},v("imgLink",{required:"Это поле не должно быть пустым",minLength:1}))),(0,r.jsx)("p",{className:c,children:j.imgLink&&"".concat(j.imgLink.message)}),(0,r.jsx)(o.A,{setItemList:function(e){S=function(e,t,n){if(n||2===arguments.length)for(var r,a=0,s=t.length;a<s;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))}([],e,!0)}}),(0,r.jsx)(u.A,{type:"submit",disabled:N,children:"Опубликовать"})]})]})})}},6186:(e,t,n)=>{n.r(t),n.d(t,{default:()=>m});var r=n(4848),a=n(3393);const s="NwjWOQzm",c="vlL6UlkF",l="EWbT2uVY";var i=n(2374),o=n(6540),u=n(4303),f=n(7767),h=n(4976),d=n(821),p=n(148);const m=function(){var e=(0,o.useState)(""),t=e[0],n=e[1],m=(0,o.useState)(""),v=m[0],g=m[1],x=(0,f.Zp)(),b=(0,u.G)((function(e){return e.auth.userId}));(0,o.useEffect)((function(){b&&x("/".concat(p.Q.Profile))}),[b]);var y=function(e){var t=(0,u.j)(),n=(0,u.G)((function(e){return e.auth.userLogin})),r=(0,u.G)((function(e){return e.auth.userId})),a=(0,u.G)((function(e){return e.auth.error}));return(0,o.useEffect)((function(){localStorage.setItem("userLogin",n),localStorage.setItem("userId",r)}),[r]),[function(){t((0,d.h)(e))},a]}({login:t,password:v}),j=y[0],N=y[1];if(!b)return(0,r.jsx)("div",{className:"It6MD1kT",children:(0,r.jsx)(a.A,{children:(0,r.jsx)("div",{className:"naF9XI1H",children:(0,r.jsxs)("form",{className:"m5YeBzEl",children:[(0,r.jsxs)("div",{className:s,children:[(0,r.jsx)("input",{type:"text",className:c,placeholder:"Логин",value:t,onChange:function(e){return n(e.target.value)}}),(0,r.jsx)("small",{className:l,children:"LOGIN_ERROR"===N&&"Неверный логин"})]}),(0,r.jsxs)("div",{className:s,children:[(0,r.jsx)("input",{type:"password",className:c,placeholder:"Пароль",value:v,onChange:function(e){return g(e.target.value)}}),(0,r.jsx)("small",{className:l,children:"PASSWORD_ERROR"===N&&"Неверный пароль"})]}),(0,r.jsxs)("div",{className:"LVS2Bz9u",children:[(0,r.jsx)(i.A,{variant:"outlined",type:"button",onClick:j,children:"Войти"}),(0,r.jsx)(h.N_,{to:"",className:"HZxne8b_",children:"Не зарегистрированны? Создайте аккаунт!"})]})]})})})})}}}]);
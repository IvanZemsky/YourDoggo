"use strict";(self.webpackChunkwebpack_react_ts_preset_1=self.webpackChunkwebpack_react_ts_preset_1||[]).push([[21,186],{7021:(e,t,r)=>{r.r(t),r.d(t,{default:()=>b});var n=r(4848),a=r(3393);const s="SO9GLe4c",l="SylOxyIQ";var c=r(4833),u=r(77),i=r(1394),o=r(2374),d=r(4303),f=r(9726),p=r(9785),h=r(7767),y=r(6186),m=r(148),g=function(){return g=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},g.apply(this,arguments)},v=m.Q.Gallery;const b=function(){var e=(0,c.g0)()[0],t=(0,h.Zp)(),r=(0,p.mN)(),m=r.register,b=r.handleSubmit,x=r.formState,j=x.errors,I=x.isSubmitting,w=r.getValues,N=(0,d.G)((function(e){return e.auth.userId}));(0,f.w)(!!N,"/".concat(y.default));var O=[];return(0,n.jsx)(a.A,{additionalStyles:"i3ecE0MA",children:(0,n.jsxs)("section",{className:"Whs7DGJg",children:[(0,n.jsx)("h1",{className:"OTC6SDun",children:"Добавление изображения"}),(0,n.jsxs)("form",{onSubmit:b((function(r){return n=void 0,a=void 0,l=function(){var r,n;return function(e,t){var r,n,a,s,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function c(c){return function(u){return function(c){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,c[0]&&(l=0)),l;)try{if(r=1,n&&(a=2&c[0]?n.return:c[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,c[1])).done)return a;switch(n=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return l.label++,{value:c[1],done:!1};case 5:l.label++,n=c[1],c=[0];continue;case 7:c=l.ops.pop(),l.trys.pop();continue;default:if(!((a=(a=l.trys).length>0&&a[a.length-1])||6!==c[0]&&2!==c[0])){l=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){l.label=c[1];break}if(6===c[0]&&l.label<a[1]){l.label=a[1],a=c;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(c);break}a[2]&&l.ops.pop(),l.trys.pop();continue}c=t.call(e,l)}catch(e){c=[6,e],n=0}finally{r=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,u])}}}(this,(function(a){switch(a.label){case 0:return r=w("title"),n=w("imgLink"),[4,e({userId:N,title:r,imgLink:n,tags:O})];case 1:return"data"in a.sent()&&t("/".concat(v)),[2]}}))},new((s=void 0)||(s=Promise))((function(e,t){function r(e){try{u(l.next(e))}catch(e){t(e)}}function c(e){try{u(l.throw(e))}catch(e){t(e)}}function u(t){var n;t.done?e(t.value):(n=t.value,n instanceof s?n:new s((function(e){e(n)}))).then(r,c)}u((l=l.apply(n,a||[])).next())}));var n,a,s,l})),children:[(0,n.jsx)(u.A,g({className:s,placeholder:"Заголовок"},m("title",{maxLength:{value:45,message:"Заголовок должен быть не более 45 символов"}}))),(0,n.jsx)("p",{className:l,children:j.title&&"".concat(j.title.message)}),(0,n.jsx)(u.A,g({className:s,placeholder:"Изображение (ссылка)"},m("imgLink",{required:"Это поле не должно быть пустым",minLength:1}))),(0,n.jsx)("p",{className:l,children:j.imgLink&&"".concat(j.imgLink.message)}),(0,n.jsx)(i.A,{setItemList:function(e){O=function(e,t,r){if(r||2===arguments.length)for(var n,a=0,s=t.length;a<s;a++)!n&&a in t||(n||(n=Array.prototype.slice.call(t,0,a)),n[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))}([],e,!0)}}),(0,n.jsx)(o.A,{type:"submit",disabled:I,children:"Опубликовать"})]})]})})}},6186:(e,t,r)=>{r.r(t),r.d(t,{default:()=>y});var n=r(4848),a=r(3393);const s="NwjWOQzm",l="vlL6UlkF",c="EWbT2uVY";var u=r(2374),i=r(6540),o=r(4303),d=r(7767),f=r(4976),p=r(821),h=r(148);const y=function(){var e=(0,i.useState)(""),t=e[0],r=e[1],y=(0,i.useState)(""),m=y[0],g=y[1],v=(0,d.Zp)(),b=(0,o.G)((function(e){return e.auth.userId}));(0,i.useEffect)((function(){b&&v("/".concat(h.Q.Profile))}),[b]);var x=function(e){var t=(0,o.j)(),r=(0,o.G)((function(e){return e.auth.userLogin})),n=(0,o.G)((function(e){return e.auth.userId})),a=(0,o.G)((function(e){return e.auth.error}));return(0,i.useEffect)((function(){localStorage.setItem("userLogin",r),localStorage.setItem("userId",n)}),[n]),[function(){t((0,p.h)(e))},a]}({login:t,password:m}),j=x[0],I=x[1];if(!b)return(0,n.jsx)("div",{className:"It6MD1kT",children:(0,n.jsx)(a.A,{children:(0,n.jsx)("div",{className:"naF9XI1H",children:(0,n.jsxs)("form",{className:"m5YeBzEl",children:[(0,n.jsxs)("div",{className:s,children:[(0,n.jsx)("input",{type:"text",className:l,placeholder:"Логин",value:t,onChange:function(e){return r(e.target.value)}}),(0,n.jsx)("small",{className:c,children:"LOGIN_ERROR"===I&&"Неверный логин"})]}),(0,n.jsxs)("div",{className:s,children:[(0,n.jsx)("input",{type:"password",className:l,placeholder:"Пароль",value:m,onChange:function(e){return g(e.target.value)}}),(0,n.jsx)("small",{className:c,children:"PASSWORD_ERROR"===I&&"Неверный пароль"})]}),(0,n.jsxs)("div",{className:"LVS2Bz9u",children:[(0,n.jsx)(u.A,{variant:"outlined",type:"button",onClick:j,children:"Войти"}),(0,n.jsx)(f.N_,{to:"",className:"HZxne8b_",children:"Не зарегистрированны? Создайте аккаунт!"})]})]})})})})}},4833:(e,t,r)=>{r.d(t,{VL:()=>o,g0:()=>d});var n=r(2963),a=r(8023),s=r(8324),l=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r},c=s.BH.GALLERY,u=s.BH.CREATE,i=a.s.injectEndpoints({endpoints:function(e){return{fetchAllGalleryImages:e.query({query:function(e){var t=e.limit,r=e.page,n=e.userLogin,a=e.userId,s=e.authUserId,l=e.textQuery,u=e.liked;return{url:"".concat(c),method:"POST",params:{sortByDate:!0,limit:t,page:r,userLogin:n,search:l,liked:u||"",userId:a},body:{authUserId:s}}},transformResponse:function(e,t){var r,n,a=null===(n=null===(r=null==t?void 0:t.response)||void 0===r?void 0:r.headers)||void 0===n?void 0:n.get("X-Total-Count");return{data:e,totalCount:a?+a:1}},serializeQueryArgs:function(e){var t=e.endpointName,r=e.queryArgs,n=(r.page,l(r,["page"]));return JSON.stringify(n)+t},merge:function(e,t,r){var n,a=r.arg,s=r.requestId;1===a.page?e.data=t.data:s&&(n=e.data).push.apply(n,t.data)},forceRefetch:function(e){var t=e.currentArg,r=e.previousArg;if(!t||!r)return!0;var a=t.page,s=l(t,["page"]),c=r.page,u=l(r,["page"]);return(0,n.A)(s,u)&&a!==c}}),fetchGalleryImageById:e.query({query:function(e){return{url:"".concat(c,"/").concat(e)}}}),createGalleryImg:e.mutation({query:function(e){return{url:"".concat(c).concat(u),method:"POST",body:e}}})}}}),o=i.useFetchAllGalleryImagesQuery,d=(i.useFetchGalleryImageByIdQuery,i.useCreateGalleryImgMutation);i.useLazyFetchAllGalleryImagesQuery,i.useLazyFetchGalleryImageByIdQuery}}]);
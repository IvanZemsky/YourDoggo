"use strict";(self.webpackChunkyourdoggo=self.webpackChunkyourdoggo||[]).push([[21,186],{77:(e,t,r)=>{r.d(t,{A:()=>i});var n=r(4848),a=r(6540);const o={input:"qIxXL6mW"};var l=function(){return l=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},l.apply(this,arguments)};const i=(0,a.forwardRef)((function(e,t){var r=e.className,a=void 0===r?"":r,i=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r}(e,["className"]),c=[o.input,a].join(" ");return(0,n.jsx)("input",l({type:"text",className:c},i,{ref:t}))}))},1394:(e,t,r)=>{r.d(t,{A:()=>u});var n=r(4848),a=r(780);const o=function(e){var t=e.tag,r=e.handleRemove;return(0,n.jsx)(a.A,{className:"WDYhK9vV",onClick:r,children:t})};var l=r(9785),i=r(6540),c=function(){return c=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},c.apply(this,arguments)},s=function(e,t,r){if(r||2===arguments.length)for(var n,a=0,o=t.length;a<o;a++)!n&&a in t||(n||(n=Array.prototype.slice.call(t,0,a)),n[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))};const u=function(e){var t=e.setItemList,r=(0,l.mN)(),a=r.register,u=r.getValues,f=r.resetField,p=(0,i.useState)([]),d=p[0],h=p[1];return(0,i.useEffect)((function(){t(d)}),[d]),(0,n.jsxs)("div",{className:"IQu64fxn",children:[!!d.length&&(0,n.jsx)(n.Fragment,{children:d.map((function(e,t){return(0,n.jsx)(o,{tag:e,handleRemove:(r=e,function(){h(d.filter((function(e){return e!==r})))})},e+t);var r}))}),(0,n.jsx)("input",c({type:"text"},a("tag",{required:!1,minLength:3,maxLength:25}),{onBlur:function(){var e=u("tag");e.trim().length&&(h(s(s([],d,!0),[e],!1)),f("tag"))},placeholder:"Тег"}))]})}},9726:(e,t,r)=>{r.d(t,{w:()=>o});var n=r(6540),a=r(7767),o=function(e,t,r){void 0===r&&(r=[]);var o=(0,a.Zp)();(0,n.useEffect)((function(){e||o(t)}),function(e,t,r){if(r||2===arguments.length)for(var n,a=0,o=t.length;a<o;a++)!n&&a in t||(n||(n=Array.prototype.slice.call(t,0,a)),n[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))}([e],r,!0))}},7021:(e,t,r)=>{r.r(t),r.d(t,{default:()=>b});var n=r(4848),a=r(3393);const o="SO9GLe4c",l="SylOxyIQ";var i=r(4833),c=r(77),s=r(1394),u=r(780),f=r(4303),p=r(9726),d=r(9785),h=r(7767),y=r(6186),g=r(148),m=function(){return m=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},m.apply(this,arguments)},v=g.Q.Gallery;const b=function(){var e=(0,i.g0)()[0],t=(0,h.Zp)(),r=(0,d.mN)(),g=r.register,b=r.handleSubmit,j=r.formState,x=j.errors,O=j.isSubmitting,I=r.getValues,A=(0,f.G)((function(e){return e.auth.userId}));(0,p.w)(!!A,"/".concat(y.default));var N=[];return(0,n.jsx)(a.A,{additionalStyles:"i3ecE0MA",children:(0,n.jsxs)("section",{className:"Whs7DGJg",children:[(0,n.jsx)("h1",{className:"OTC6SDun",children:"Добавление изображения"}),(0,n.jsxs)("form",{onSubmit:b((function(r){return n=void 0,a=void 0,l=function(){var r,n;return function(e,t){var r,n,a,o,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(i){return function(c){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,i[0]&&(l=0)),l;)try{if(r=1,n&&(a=2&i[0]?n.return:i[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,i[1])).done)return a;switch(n=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,n=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!((a=(a=l.trys).length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(e){i=[6,e],n=0}finally{r=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}}(this,(function(a){switch(a.label){case 0:return r=I("title"),n=I("imgLink"),[4,e({userId:A,title:r,imgLink:n,tags:N})];case 1:return"data"in a.sent()&&t("/".concat(v)),[2]}}))},new((o=void 0)||(o=Promise))((function(e,t){function r(e){try{c(l.next(e))}catch(e){t(e)}}function i(e){try{c(l.throw(e))}catch(e){t(e)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof o?n:new o((function(e){e(n)}))).then(r,i)}c((l=l.apply(n,a||[])).next())}));var n,a,o,l})),children:[(0,n.jsx)(c.A,m({className:o,placeholder:"Заголовок"},g("title",{maxLength:{value:45,message:"Заголовок должен быть не более 45 символов"}}))),(0,n.jsx)("p",{className:l,children:x.title&&"".concat(x.title.message)}),(0,n.jsx)(c.A,m({className:o,placeholder:"Изображение (ссылка)"},g("imgLink",{required:"Это поле не должно быть пустым",minLength:1}))),(0,n.jsx)("p",{className:l,children:x.imgLink&&"".concat(x.imgLink.message)}),(0,n.jsx)(s.A,{setItemList:function(e){N=function(e,t,r){if(r||2===arguments.length)for(var n,a=0,o=t.length;a<o;a++)!n&&a in t||(n||(n=Array.prototype.slice.call(t,0,a)),n[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))}([],e,!0)}}),(0,n.jsx)(u.A,{type:"submit",disabled:O,children:"Опубликовать"})]})]})})}},6186:(e,t,r)=>{r.r(t),r.d(t,{default:()=>y});var n=r(4848),a=r(3393);const o="NwjWOQzm",l="vlL6UlkF",i="EWbT2uVY";var c=r(780),s=r(6540),u=r(4303),f=r(7767),p=r(4976),d=r(821),h=r(148);const y=function(){var e=(0,s.useState)(""),t=e[0],r=e[1],y=(0,s.useState)(""),g=y[0],m=y[1],v=(0,f.Zp)(),b=(0,u.G)((function(e){return e.auth.userId}));(0,s.useEffect)((function(){b&&v("/".concat(h.Q.Profile))}),[b]);var j=function(e){var t=(0,u.j)(),r=(0,u.G)((function(e){return e.auth.userLogin})),n=(0,u.G)((function(e){return e.auth.userId})),a=(0,u.G)((function(e){return e.auth.error}));return(0,s.useEffect)((function(){localStorage.setItem("userLogin",r),localStorage.setItem("userId",n)}),[n]),[function(){t((0,d.h)(e))},a]}({login:t,password:g}),x=j[0],O=j[1];if(!b)return(0,n.jsx)("div",{className:"It6MD1kT",children:(0,n.jsx)(a.A,{children:(0,n.jsx)("div",{className:"naF9XI1H",children:(0,n.jsxs)("form",{className:"m5YeBzEl",children:[(0,n.jsxs)("div",{className:o,children:[(0,n.jsx)("input",{type:"text",className:l,placeholder:"Логин",value:t,onChange:function(e){return r(e.target.value)}}),(0,n.jsx)("small",{className:i,children:"LOGIN_ERROR"===O&&"Неверный логин"})]}),(0,n.jsxs)("div",{className:o,children:[(0,n.jsx)("input",{type:"password",className:l,placeholder:"Пароль",value:g,onChange:function(e){return m(e.target.value)}}),(0,n.jsx)("small",{className:i,children:"PASSWORD_ERROR"===O&&"Неверный пароль"})]}),(0,n.jsxs)("div",{className:"LVS2Bz9u",children:[(0,n.jsx)(c.A,{variant:"outlined",type:"button",onClick:x,children:"Войти"}),(0,n.jsx)(p.N_,{to:"",className:"HZxne8b_",children:"Не зарегистрированны? Создайте аккаунт!"})]})]})})})})}},4833:(e,t,r)=>{r.d(t,{VL:()=>u,g0:()=>f});var n=r(6327),a=r(8023),o=r(8324),l=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r},i=o.BH.GALLERY,c=o.BH.CREATE,s=a.s.injectEndpoints({endpoints:function(e){return{fetchAllGalleryImages:e.query({query:function(e){var t=e.limit,r=e.page,n=e.userLogin,a=e.userId,o=e.authUserId,l=e.textQuery,c=e.liked;return{url:"".concat(i),method:"POST",params:{sortByDate:!0,limit:t,page:r,userLogin:n,search:l,liked:c||"",userId:a},body:{authUserId:o}}},transformResponse:function(e,t){var r,n,a=null===(n=null===(r=null==t?void 0:t.response)||void 0===r?void 0:r.headers)||void 0===n?void 0:n.get("X-Total-Count");return{data:e,totalCount:a?+a:1}},serializeQueryArgs:function(e){var t=e.endpointName,r=e.queryArgs,n=(r.page,l(r,["page"]));return JSON.stringify(n)+t},merge:function(e,t,r){var n,a=r.arg,o=r.requestId;1===a.page?e.data=t.data:o&&(n=e.data).push.apply(n,t.data)},forceRefetch:function(e){var t=e.currentArg,r=e.previousArg;if(!t||!r)return!0;var a=t.page,o=l(t,["page"]),i=r.page,c=l(r,["page"]);return(0,n.A)(o,c)&&a!==i}}),fetchGalleryImageById:e.query({query:function(e){return{url:"".concat(i,"/").concat(e)}}}),createGalleryImg:e.mutation({query:function(e){return{url:"".concat(i).concat(c),method:"POST",body:e}}})}}}),u=s.useFetchAllGalleryImagesQuery,f=(s.useFetchGalleryImageByIdQuery,s.useCreateGalleryImgMutation);s.useLazyFetchAllGalleryImagesQuery,s.useLazyFetchGalleryImageByIdQuery},6327:(e,t,r)=>{function n(e,t){var r=Object.entries(e),n=Object.entries(t);if(r.length!==n.length)return!1;for(var a=0;a<r.length;++a)if(r[a][0]!==n[a][0]||r[a][1]!==n[a][1])return!1;return!0}r.d(t,{A:()=>n})}}]);
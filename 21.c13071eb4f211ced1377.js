"use strict";(self.webpackChunkyourdoggo=self.webpackChunkyourdoggo||[]).push([[21,186],{9726:(e,t,r)=>{r.d(t,{w:()=>l});var n=r(6540),a=r(7767),l=function(e,t,r){void 0===r&&(r=[]);var l=(0,a.Zp)();(0,n.useEffect)((function(){e||l(t)}),function(e,t,r){if(r||2===arguments.length)for(var n,a=0,l=t.length;a<l;a++)!n&&a in t||(n||(n=Array.prototype.slice.call(t,0,a)),n[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))}([e],r,!0))}},7021:(e,t,r)=>{r.r(t),r.d(t,{default:()=>y});var n=r(4848),a=r(9913);const l="SO9GLe4c",o="SylOxyIQ";var u=r(4833),i=r(4303),s=r(9726),c=r(9785),f=r(7767),d=r(6186),h=r(148),p=function(){return p=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},p.apply(this,arguments)},g=h.Q.Gallery;const y=function(){var e=(0,u.g0)()[0],t=(0,f.Zp)(),r=(0,c.mN)(),h=r.register,y=r.control,m=r.handleSubmit,v=r.formState,b=v.errors,x=v.isSubmitting,j=r.getValues,I=(0,i.G)((function(e){return e.auth.userId}));(0,s.w)(!!I,"/".concat(d.default));var O=[];return(0,n.jsx)(a.mO,{additionalStyles:"i3ecE0MA",children:(0,n.jsxs)("section",{className:"Whs7DGJg",children:[(0,n.jsx)("h1",{className:"OTC6SDun",children:"Добавление изображения"}),(0,n.jsxs)("form",{onSubmit:m((function(r){return n=void 0,a=void 0,o=function(){var r,n;return function(e,t){var r,n,a,l,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return l={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l;function u(u){return function(i){return function(u){if(r)throw new TypeError("Generator is already executing.");for(;l&&(l=0,u[0]&&(o=0)),o;)try{if(r=1,n&&(a=2&u[0]?n.return:u[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,u[1])).done)return a;switch(n=0,a&&(u=[2&u[0],a.value]),u[0]){case 0:case 1:a=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,n=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!((a=(a=o.trys).length>0&&a[a.length-1])||6!==u[0]&&2!==u[0])){o=0;continue}if(3===u[0]&&(!a||u[1]>a[0]&&u[1]<a[3])){o.label=u[1];break}if(6===u[0]&&o.label<a[1]){o.label=a[1],a=u;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(u);break}a[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(e){u=[6,e],n=0}finally{r=a=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,i])}}}(this,(function(a){switch(a.label){case 0:return r=j("title"),n=j("imgLink"),[4,e({userId:I,title:r,imgLink:n,tags:O})];case 1:return"data"in a.sent()&&t("/".concat(g)),[2]}}))},new((l=void 0)||(l=Promise))((function(e,t){function r(e){try{i(o.next(e))}catch(e){t(e)}}function u(e){try{i(o.throw(e))}catch(e){t(e)}}function i(t){var n;t.done?e(t.value):(n=t.value,n instanceof l?n:new l((function(e){e(n)}))).then(r,u)}i((o=o.apply(n,a||[])).next())}));var n,a,l,o})),children:[(0,n.jsx)(a.pd,p({className:l,placeholder:"Заголовок"},h("title",{maxLength:{value:45,message:"Заголовок должен быть не более 45 символов"}}))),(0,n.jsx)("p",{className:o,children:b.title&&"".concat(b.title.message)}),(0,n.jsx)(c.xI,{name:"imgLink",control:y,defaultValue:"",rules:{required:"Это поле не должно быть пустым",minLength:1},render:function(e){var t=e.field;return(0,n.jsx)(a.sP,p({imgText:"Обложка",placeholder:"Картинка превью (ссылка)",className:l,handleChange:t.onChange},t))}}),(0,n.jsx)("p",{className:o,children:b.imgLink&&"".concat(b.imgLink.message)}),(0,n.jsx)(a.gK,{setItemList:function(e){O=function(e,t,r){if(r||2===arguments.length)for(var n,a=0,l=t.length;a<l;a++)!n&&a in t||(n||(n=Array.prototype.slice.call(t,0,a)),n[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))}([],e,!0)}}),(0,n.jsx)(a.$n,{type:"submit",disabled:x,children:"Опубликовать"})]})]})})}},6186:(e,t,r)=>{r.r(t),r.d(t,{default:()=>p});var n=r(4848);const a="NwjWOQzm",l="vlL6UlkF",o="EWbT2uVY";var u=r(9913),i=r(6540),s=r(4303),c=r(7767),f=r(4976),d=r(821),h=r(148);const p=function(){var e=(0,i.useState)(""),t=e[0],r=e[1],p=(0,i.useState)(""),g=p[0],y=p[1],m=(0,c.Zp)(),v=(0,s.G)((function(e){return e.auth.userId}));(0,i.useEffect)((function(){v&&m("/".concat(h.Q.Profile))}),[v]);var b=function(e){var t=(0,s.j)(),r=(0,s.G)((function(e){return e.auth.userLogin})),n=(0,s.G)((function(e){return e.auth.userId})),a=(0,s.G)((function(e){return e.auth.error}));return(0,i.useEffect)((function(){localStorage.setItem("userLogin",r),localStorage.setItem("userId",n)}),[n]),[function(){t((0,d.h)(e))},a]}({login:t,password:g}),x=b[0],j=b[1];if(!v)return(0,n.jsx)("div",{className:"It6MD1kT",children:(0,n.jsx)(u.mO,{children:(0,n.jsx)("div",{className:"naF9XI1H",children:(0,n.jsxs)("form",{className:"m5YeBzEl",children:[(0,n.jsxs)("div",{className:a,children:[(0,n.jsx)("input",{type:"text",className:l,placeholder:"Логин",value:t,onChange:function(e){return r(e.target.value)}}),(0,n.jsx)("small",{className:o,children:"LOGIN_ERROR"===j&&"Неверный логин"})]}),(0,n.jsxs)("div",{className:a,children:[(0,n.jsx)("input",{type:"password",className:l,placeholder:"Пароль",value:g,onChange:function(e){return y(e.target.value)}}),(0,n.jsx)("small",{className:o,children:"PASSWORD_ERROR"===j&&"Неверный пароль"})]}),(0,n.jsxs)("div",{className:"LVS2Bz9u",children:[(0,n.jsx)(u.$n,{variant:"outlined",type:"button",onClick:x,children:"Войти"}),(0,n.jsx)(f.N_,{to:"",className:"HZxne8b_",children:"Не зарегистрированны? Создайте аккаунт!"})]})]})})})})}},4833:(e,t,r)=>{r.d(t,{VL:()=>c,g0:()=>f});var n=r(6327),a=r(8023),l=r(8324),o=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r},u=l.BH.GALLERY,i=l.BH.CREATE,s=a.s.injectEndpoints({endpoints:function(e){return{fetchAllGalleryImages:e.query({query:function(e){var t=e.limit,r=e.page,n=e.userLogin,a=e.userId,l=e.authUserId,o=e.textQuery,i=e.liked;return{url:"".concat(u),method:"POST",params:{sortByDate:!0,limit:t,page:r,userLogin:n,search:o,liked:i||"",userId:a},body:{authUserId:l}}},transformResponse:function(e,t){var r,n,a=null===(n=null===(r=null==t?void 0:t.response)||void 0===r?void 0:r.headers)||void 0===n?void 0:n.get("X-Total-Count");return{data:e,totalCount:a?+a:1}},serializeQueryArgs:function(e){var t=e.endpointName,r=e.queryArgs,n=(r.page,o(r,["page"]));return JSON.stringify(n)+t},merge:function(e,t,r){var n,a=r.arg,l=r.requestId;1===a.page?e.data=t.data:l&&(n=e.data).push.apply(n,t.data)},forceRefetch:function(e){var t=e.currentArg,r=e.previousArg;if(!t||!r)return!0;var a=t.page,l=o(t,["page"]),u=r.page,i=o(r,["page"]);return(0,n.A)(l,i)&&a!==u}}),fetchGalleryImageById:e.query({query:function(e){return{url:"".concat(u,"/").concat(e)}}}),createGalleryImg:e.mutation({query:function(e){return{url:"".concat(u).concat(i),method:"POST",body:e}}})}}}),c=s.useFetchAllGalleryImagesQuery,f=(s.useFetchGalleryImageByIdQuery,s.useCreateGalleryImgMutation);s.useLazyFetchAllGalleryImagesQuery,s.useLazyFetchGalleryImageByIdQuery},6327:(e,t,r)=>{function n(e,t){var r=Object.entries(e),n=Object.entries(t);if(r.length!==n.length)return!1;for(var a=0;a<r.length;++a)if(r[a][0]!==n[a][0]||r[a][1]!==n[a][1])return!1;return!0}r.d(t,{A:()=>n})}}]);
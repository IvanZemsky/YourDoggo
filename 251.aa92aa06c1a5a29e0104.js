"use strict";(self.webpackChunkyourdoggo=self.webpackChunkyourdoggo||[]).push([[251],{8699:(e,t,n)=>{n.d(t,{A:()=>d});var r=n(4848),i=n(780),a=n(5898),o=n(6540),s=n(9164),c=n(8788),u=n(4303),l=function(){return l=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},l.apply(this,arguments)};const d=function(e){var t=e.isLiked,n=e.likedItemId,d=(e.className,e.unlikedStyles),f=e.likedStyles,p=e.endpoint,h=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["isLiked","likedItemId","className","unlikedStyles","likedStyles","endpoint"]),y=(0,u.G)((function(e){return e.auth.userId})),g=(0,c.p)(n,y,t,p),v=g.toggleLike,m=g.liked,k=(0,o.useCallback)((function(e){return t=void 0,n=void 0,i=function(){return function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(o=0)),o;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){o.label=s[1];break}if(6===s[0]&&o.label<i[1]){o.label=i[1],i=s;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(s);break}i[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}(this,(function(t){switch(t.label){case 0:return e.stopPropagation(),e.preventDefault(),y?[4,v()]:[2];case 1:return t.sent(),[2]}}))},new((r=void 0)||(r=Promise))((function(e,a){function o(e){try{c(i.next(e))}catch(e){a(e)}}function s(e){try{c(i.throw(e))}catch(e){a(e)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r((function(e){e(n)}))).then(o,s)}c((i=i.apply(t,n||[])).next())}));var t,n,r,i}),[]),j=(0,s.p)(m,d,f);return(0,r.jsx)(i.A,l({variant:"none",onClick:k,className:j},h,{children:(0,r.jsx)(a.A,{})}))}},2995:(e,t,n)=>{n.d(t,{A:()=>o});var r=n(4848),i=n(4303),a=n(8788);const o=function(e){var t=e.id,n=e.likes,o=e.isLiked,s=e.endpoint,c=e.className,u=(0,i.G)((function(e){return e.auth.userId})),l=(0,a.p)(t,u,o,s).like,d=l?l.likes:n;return(0,r.jsx)("p",{className:c,children:d})}},1796:(e,t,n)=>{n.d(t,{A:()=>a});var r=n(4848),i=n(780);const a=function(e){var t=e.tags,n=e.handleTagClick;return(0,r.jsx)(r.Fragment,{children:t.map((function(e,t){return(0,r.jsx)(i.A,{variant:"filled",className:"i8AxVFnz",onClick:n&&n(e),children:e},t)}))})}},5898:(e,t,n)=>{n.d(t,{A:()=>i});var r=n(4848);const i=function(){return(0,r.jsxs)("svg",{viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsx)("rect",{fill:"none",height:"256",width:"256"}),(0,r.jsx)("path",{d:"M128,216S28,160,28,92A52,52,0,0,1,128,72h0A52,52,0,0,1,228,92C228,160,128,216,128,216Z",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"8"})]})}},6149:(e,t,n)=>{n.d(t,{p:()=>s});var r=n(148),i=n(4303),a=r.Q.User,o=r.Q.Profile,s=function(e){return(0,i.G)((function(e){return e.auth.userId}))===e?"/".concat(o):"/".concat(a,"/").concat(e)}},4251:(e,t,n)=>{n.r(t),n.d(t,{default:()=>m});var r=n(4848),i=n(3996);var a=n(7767),o=n(7494),s=n(3393),c=n(4976),u=n(6149),l=n(3049),d=n(8699),f=n(2995),p=n(8324),h=n(4303),y=n(6540),g=n(1796),v=p.BH.ARTICLES;const m=function(){var e=(0,a.g)().id,t=(0,h.G)((function(e){return e.auth.userId})),n=(0,i.E6)({id:e,authUserId:t,userLogin:!0}),p=n.data,m=n.isLoading,k=n.isFetching,j=n.isError,b=(0,y.useRef)(null);(0,y.useEffect)((function(){b.current&&p&&(b.current.innerHTML=p.text)}),[b,p]);var x=(0,u.p)(null==p?void 0:p.userId),A=p?(0,l.Y)(p.datetime,"text"):"";return m||k?(0,r.jsx)(o.A,{}):j?(0,r.jsx)("p",{children:"Ошибка"}):p&&(0,r.jsx)(s.A,{additionalStyles:"ePnyWMxe",children:(0,r.jsxs)("div",{className:"PYBApAMs",children:[(0,r.jsxs)("header",{className:"UwmZw40q",children:[(0,r.jsxs)("div",{className:"TS2vPI2V",children:[(0,r.jsx)("h1",{className:"EYljaxuW",children:p.title}),(0,r.jsxs)(c.N_,{to:x,className:"d37CaZ0N",children:["@",p.login]})]}),(0,r.jsxs)("time",{dateTime:p.datetime,className:"gB0ZjnD8",children:["Опубликовано ",A]})]}),(0,r.jsx)("p",{className:"tEXOb9lh",ref:b}),!!p.tags.length&&(0,r.jsx)("div",{className:"d_Cwyjlm",children:(0,r.jsx)(g.A,{tags:p.tags})}),(0,r.jsxs)("div",{className:"EVL3DQIm",children:[(0,r.jsx)(d.A,{likedItemId:e,isLiked:p.isLiked,likedStyles:"nl33eQfx",unlikedStyles:"IVsP5FOo",endpoint:v}),(0,r.jsx)(f.A,{id:e,likes:p.likes,isLiked:p.isLiked,className:"FL6ND4hO",endpoint:v})]})]})})}},3996:(e,t,n)=>{n.d(t,{E6:()=>d,IP:()=>l,jd:()=>f});var r=n(8324),i=n(8023),a=n(6327),o=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},s=r.BH.ARTICLES,c=r.BH.CREATE,u=i.s.injectEndpoints({endpoints:function(e){return{fetchAllArticles:e.query({query:function(e){var t=e.limit,n=e.page,r=e.userLogin,i=e.userId,a=e.authUserId,o=e.textQuery,c=e.liked;return{url:"".concat(s,"/?sortByDate=true"),method:"POST",params:{limit:t,page:n,userLogin:r,search:o,liked:c||"",userId:i},body:{authUserId:a||""}}},transformResponse:function(e,t){var n,r,i=null===(r=null===(n=null==t?void 0:t.response)||void 0===n?void 0:n.headers)||void 0===r?void 0:r.get("X-Total-Count");return{data:e,totalCount:i?+i:1}},serializeQueryArgs:function(e){e.endpointName;var t=e.queryArgs;return t.page,o(t,["page"]),{queryArgs:t}},forceRefetch:function(e){var t=e.currentArg,n=e.previousArg;if(!t||!n)return!0;t.page;var r=o(t,["page"]),i=(n.page,o(n,["page"]));return(0,a.A)(r,i)}}),fetchArticleById:e.query({query:function(e){var t=e.id,n=e.userLogin,r=e.authUserId;return{url:"".concat(s,"/").concat(t),method:"POST",params:{userLogin:n},body:{authUserId:r||""}}}}),createArticle:e.mutation({query:function(e){return{url:"".concat(s).concat(c),method:"POST",body:e}}})}}}),l=u.useFetchAllArticlesQuery,d=u.useFetchArticleByIdQuery,f=u.useCreateArticleMutation;u.useLazyFetchAllArticlesQuery,u.useLazyFetchArticleByIdQuery},8788:(e,t,n)=>{n.d(t,{p:()=>d});var r=n(8324),i=n(8023),a=function(){return a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},a.apply(this,arguments)},o=r.BH.ARTICLES,s=r.BH.GALLERY,c=r.BH.LIKES,u=i.s.injectEndpoints({endpoints:function(e){return{toggleLike:e.mutation({query:function(e){var t=e.userId,n=e.likedItemId,r=e.endpoint;return{url:"".concat(r).concat(c),method:"POST",body:a(a({userId:t},r===o&&{articleId:n}),r===s&&{galleryimgId:n})}}})}}}).useToggleLikeMutation,l=n(6540),d=function(e,t,n,r){var i=u({fixedCacheKey:r+e}),a=i[0],o=i[1].data,s={userId:t||"",likedItemId:e,endpoint:r},c=(0,l.useState)(n),d=c[0],f=c[1];return(0,l.useEffect)((function(){o&&f(o.liked)}),[o]),{toggleLike:function(){return a(s)},liked:d,like:o}}},6327:(e,t,n)=>{function r(e,t){var n=Object.entries(e),r=Object.entries(t);if(n.length!==r.length)return!1;for(var i=0;i<n.length;++i)if(n[i][0]!==r[i][0]||n[i][1]!==r[i][1])return!1;return!0}n.d(t,{A:()=>r})},3049:(e,t,n)=>{n.d(t,{Y:()=>i});var r=["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"],i=function(e,t){var n=new Date(e),i=n.getDate(),a=n.getMonth(),o=n.getFullYear(),s=a<10?"0".concat(a+1):a+1,c=i<10?"0".concat(i):i;switch(t){case"text":return"".concat(i," ").concat(r[a],", ").concat(o);case"date":return"".concat(c,".").concat(s,".").concat(o)}}}}]);
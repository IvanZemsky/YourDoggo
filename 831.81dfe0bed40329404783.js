"use strict";(self.webpackChunkyourdoggo=self.webpackChunkyourdoggo||[]).push([[831],{1092:(e,n,t)=>{t.d(n,{A:()=>d});var r=t(4848),a=t(9913),i=t(3121),s=t(6540),c=t(9164),l=t(8788),o=t(4303),u=function(){return u=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},u.apply(this,arguments)};const d=function(e){var n=e.isLiked,t=e.likedItemId,d=(e.className,e.unlikedStyles),f=e.likedStyles,h=e.endpoint,p=function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)n.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(t[r[a]]=e[r[a]])}return t}(e,["isLiked","likedItemId","className","unlikedStyles","likedStyles","endpoint"]),g=(0,o.G)((function(e){return e.auth.userId})),y=(0,l.p)(t,g,n,h),v=y.toggleLike,m=y.liked,j=(0,s.useCallback)((function(e){return n=void 0,t=void 0,a=function(){return function(e,n){var t,r,a,i,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(l){return function(c){if(t)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(s=0)),s;)try{if(t=1,r&&(a=2&c[0]?r.return:c[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,c[1])).done)return a;switch(r=0,a&&(c=[2&c[0],a.value]),c[0]){case 0:case 1:a=c;break;case 4:return s.label++,{value:c[1],done:!1};case 5:s.label++,r=c[1],c=[0];continue;case 7:c=s.ops.pop(),s.trys.pop();continue;default:if(!((a=(a=s.trys).length>0&&a[a.length-1])||6!==c[0]&&2!==c[0])){s=0;continue}if(3===c[0]&&(!a||c[1]>a[0]&&c[1]<a[3])){s.label=c[1];break}if(6===c[0]&&s.label<a[1]){s.label=a[1],a=c;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(c);break}a[2]&&s.ops.pop(),s.trys.pop();continue}c=n.call(e,s)}catch(e){c=[6,e],r=0}finally{t=a=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,l])}}}(this,(function(n){switch(n.label){case 0:return e.stopPropagation(),e.preventDefault(),g?[4,v()]:[2];case 1:return n.sent(),[2]}}))},new((r=void 0)||(r=Promise))((function(e,i){function s(e){try{l(a.next(e))}catch(e){i(e)}}function c(e){try{l(a.throw(e))}catch(e){i(e)}}function l(n){var t;n.done?e(n.value):(t=n.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,c)}l((a=a.apply(n,t||[])).next())}));var n,t,r,a}),[]),x=(0,c.p)(m,d,f);return(0,r.jsx)(a.$n,u({variant:"none",onClick:j,className:x},p,{children:(0,r.jsx)(i.C3,{})}))}},8756:(e,n,t)=>{t.d(n,{A:()=>s});var r=t(4848),a=t(4303),i=t(8788);const s=function(e){var n=e.id,t=e.likes,s=e.isLiked,c=e.endpoint,l=e.className,o=(0,a.G)((function(e){return e.auth.userId})),u=(0,i.p)(n,o,s,c).like,d=u?u.likes:t;return(0,r.jsx)("p",{className:l,children:d})}},5904:(e,n,t)=>{t.d(n,{A:()=>i});var r=t(4848);var a=t(9913);const i=function(e){var n=e.input,t=e.children;return(0,r.jsx)("header",{className:"Kw0QhqY2",children:(0,r.jsx)(a.mO,{children:(0,r.jsxs)("div",{className:"uMYuABUa",children:[n,(0,r.jsx)("div",{className:"bihhdsiy",children:t})]})})})}},29:(e,n,t)=>{t.d(n,{B:()=>i});var r=t(6540),a={threshold:.7},i=function(e,n,t){void 0===t&&(t=a);var i=new IntersectionObserver((function(e){e.forEach((function(e){e.isIntersecting&&n()}))}),t);(0,r.useEffect)((function(){return e.current&&i.observe(e.current),function(){i.disconnect()}}),[e,n])}},6149:(e,n,t)=>{t.d(n,{p:()=>c});var r=t(148),a=t(4303),i=r.Q.User,s=r.Q.Profile,c=function(e){return(0,a.G)((function(e){return e.auth.userId}))===e?"/".concat(s):"/".concat(i,"/").concat(e)}},6831:(e,n,t)=>{t.r(n),t.d(n,{default:()=>H});var r=t(4848),a=t(9913);var i=t(3049),s=t(6540),c=t(4303),l=t(1757);const o={imageModal:"ZMct_6RL",fadeIn:"evFwfH6q",content:"LJ7fbD_w",imageInfo:"Urr0nxpy",header:"JrIFODUZ",headerBtns:"ByTNjh0w",user:"bLmQM_Wf",likes:"SH56KZXv",likeBtn:"yETy5U8g",liked:"Wgx5oRDe",closeBtn:"bF5eh0L4",titleWrap:"x64rSihh",title:"mLno7j0_",publiches:"ZWUsa8u9",tags:"aMmGufKi"};var u=t(4976),d=t(3121),f=t(1092),h=t(8324),p=t(8756),g=t(9377),y=t(6149);var v=t(9164);const m=function(e){var n=e.imgLink,t=(0,s.useState)(!1),a=t[0],i=t[1],c=(0,v.p)(a,"","T1BF2uSc");return(0,r.jsx)("div",{className:"HOUON8hB",children:(0,r.jsx)("img",{src:n,alt:"Изображение",className:c,onClick:function(){i(!a)}})})};var j=h.BH.GALLERY;const x=function(e){var n=e.id,t=e.title,h=e.tags,v=e.userId,x=e.imgLink,k=e.datetime,b=e.login,I=e.likes,O=e.isLiked,N=(0,c.j)(),L="imageModal".concat(n),w=(0,i.Y)(k,"text").split(",").join(""),S=(0,s.useCallback)((function(e){e.stopPropagation(),N((0,l.Oo)())}),[]),A=(0,y.p)(v);return(0,r.jsx)(a.aF,{modalContent:L,className:o.imageModal,onClick:S,children:(0,r.jsx)(a.mO,{children:(0,r.jsx)("div",{className:o.content,onClick:function(e){e.stopPropagation()},children:(0,r.jsxs)("div",{className:o.imageInfo,children:[(0,r.jsxs)("header",{className:o.header,children:[(0,r.jsxs)(u.N_,{to:A,className:o.user,children:["@ ",b]}),(0,r.jsxs)("div",{className:o.headerBtns,children:[(0,r.jsx)(p.A,{className:o.likes,id:n,likes:I,isLiked:O,endpoint:j}),(0,r.jsx)(f.A,{likedItemId:n,isLiked:O,endpoint:j,likedStyles:o.liked,unlikedStyles:o.likeBtn}),(0,r.jsx)(a.$n,{variant:"none",icon:(0,r.jsx)(d.w0,{}),className:o.closeBtn,onClick:S})]})]}),(0,r.jsx)(m,{imgLink:x}),(0,r.jsxs)("div",{className:o.desc,children:[(0,r.jsxs)("div",{className:o.titleWrap,children:[t&&(0,r.jsx)("h3",{className:o.title,children:t}),(0,r.jsxs)("p",{className:o.published,children:["Опубликовано ",w," года"]})]}),!!h.length&&(0,r.jsx)("div",{className:o.tags,children:(0,r.jsx)(a.YD,{tags:h,handleTagClick:function(e){return function(n){N((0,l.Oo)()),N((0,g.Ud)(e))}}})})]})]})})})})};var k=function(){return k=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},k.apply(this,arguments)},b=h.BH.GALLERY;const I=function(e){var n=e.id,t=e.title,a=e.imgLink,o=e.datetime,d=e.userId,h=e.login,p=e.isLiked,g=e.hasModal,v=void 0===g||g,m=(0,c.j)(),j=(0,s.useState)(""),I=j[0],O=j[1],N="imageModal".concat(n),L=(0,y.p)(d),w=(0,i.Y)(o,"text"),S=(0,s.useCallback)((function(e){e.target instanceof HTMLAnchorElement||m((0,l.qf)(N))}),[]);return(0,r.jsxs)("div",{className:"zwWu6DWA",onClick:v?S:void 0,children:[(0,r.jsxs)("div",{className:"q5pBEzec",children:[h&&(0,r.jsxs)(u.N_,{to:L,className:"WHHYoXgg",children:["@",h]}),(0,r.jsx)(f.A,{likedItemId:n,endpoint:b,isLiked:p,likedStyles:"PkxF6PPD",unlikedStyles:"lVk6SPCD"}),(0,r.jsx)(x,k({},e))]}),(0,r.jsx)("img",{src:a,alt:t,className:I,onLoad:function(){O("Ia3SjXf5")}}),(0,r.jsxs)("div",{className:"UE6xMsni",children:[(0,r.jsx)("div",{className:"KGpFM3Ay",children:w}),(0,r.jsx)("p",{className:"_rnsHZji",children:t})]})]})};var O=t(7494),N=t(4833),L=function(){return L=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},L.apply(this,arguments)},w=t(29),S=function(){return S=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},S.apply(this,arguments)};const A=function(){var e,n,t=(e=(0,c.G)((function(e){return e.galleryFilter})),n=(0,c.G)((function(e){return e.auth.userId})),(0,N.VL)(L(L({},e),{authUserId:n}))),a=t.data,i=t.isLoading,l=t.isFetching,o=t.isError,u=(0,c.j)(),d=null==a?void 0:a.data,f=null==a?void 0:a.totalCount,h=(0,c.G)((function(e){return e.galleryFilter.limit}))||12,p=(0,c.G)((function(e){return e.galleryFilter.page}))||1,y=(0,s.useRef)(null),v=Math.ceil(f/h)<=p;return(0,w.B)(y,(function(){v||u((0,g.Ir)())})),o?(0,r.jsx)("p",{children:"Ошибка"}):(i||l)&&1===p?(0,r.jsx)(O.A,{}):(0,r.jsx)(s.Fragment,{children:(0,r.jsxs)("div",{className:"Iq2X_ZZS",children:[(null==d?void 0:d.length)?(0,r.jsx)("div",{className:"IVcZorXz",children:d.map((function(e){return(0,r.jsx)(I,S({id:e._id},e),e._id)}))}):(0,r.jsx)("p",{children:"Ничего не найдено"}),(i||l)&&1!==p?(0,r.jsx)("div",{className:"_0QH8_sgj",children:(0,r.jsx)(O.A,{})}):(0,r.jsx)("div",{ref:y,className:"Ra7IKZV3"})]})})};var B=t(5904),G=t(148),C=t(6231);const P="tVPQk8RD";var E=G.Q.Gallery,F=G.Q.Create;const M=function(){var e=(0,c.j)(),n=(0,C.Ub)({maxWidth:950}),t=(0,c.G)((function(e){return e.auth.userId})),i=(0,c.G)((function(e){return e.galleryFilter.userId})),l=(0,c.G)((function(e){return e.galleryFilter.liked})),o=i===t,u=""!==i&&!o;return(0,r.jsxs)(a.W1,{isOpen:n,children:[!!t&&(0,r.jsxs)(s.Fragment,{children:[(0,r.jsx)(a.$B,{className:P,text:"Понравишиеся",handleClick:function(){e((0,g.ow)())},name:"filters",id:"liked",checked:l,readOnly:!0}),(0,r.jsx)(a.$B,{className:P,text:u?"Все фото":"Ваша галерея",handleClick:function(){e((0,g.JN)(t))},name:"filters",id:"your-gallery",checked:o,readOnly:!0})]}),(0,r.jsx)(a.Ek,{to:"/".concat(E,"/").concat(F),icon:(0,r.jsx)(d.c1,{}),className:"ohpM3WQh",children:"Добавить"})]})},Q=function(){return(0,r.jsx)(B.A,{input:(0,r.jsx)(a.DO,{dispatchFunc:g.Ud}),children:(0,r.jsx)(M,{})})},H=function(){return(0,r.jsxs)("div",{className:"Q4jgJvSa",children:[(0,r.jsx)(Q,{}),(0,r.jsx)(a.mO,{children:(0,r.jsx)(A,{})})]})}},4833:(e,n,t)=>{t.d(n,{VL:()=>u,g0:()=>d});var r=t(6327),a=t(8023),i=t(8324),s=function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)n.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(t[r[a]]=e[r[a]])}return t},c=i.BH.GALLERY,l=i.BH.CREATE,o=a.s.injectEndpoints({endpoints:function(e){return{fetchAllGalleryImages:e.query({query:function(e){var n=e.limit,t=e.page,r=e.userLogin,a=e.userId,i=e.authUserId,s=e.textQuery,l=e.liked;return{url:"".concat(c),method:"POST",params:{sortByDate:!0,limit:n,page:t,userLogin:r,search:s,liked:l||"",userId:a},body:{authUserId:i}}},transformResponse:function(e,n){var t,r,a=null===(r=null===(t=null==n?void 0:n.response)||void 0===t?void 0:t.headers)||void 0===r?void 0:r.get("X-Total-Count");return{data:e,totalCount:a?+a:1}},serializeQueryArgs:function(e){var n=e.endpointName,t=e.queryArgs,r=(t.page,s(t,["page"]));return JSON.stringify(r)+n},merge:function(e,n,t){var r,a=t.arg,i=t.requestId;1===a.page?e.data=n.data:i&&(r=e.data).push.apply(r,n.data)},forceRefetch:function(e){var n=e.currentArg,t=e.previousArg;if(!n||!t)return!0;var a=n.page,i=s(n,["page"]),c=t.page,l=s(t,["page"]);return(0,r.A)(i,l)&&a!==c}}),fetchGalleryImageById:e.query({query:function(e){return{url:"".concat(c,"/").concat(e)}}}),createGalleryImg:e.mutation({query:function(e){return{url:"".concat(c).concat(l),method:"POST",body:e}}})}}}),u=o.useFetchAllGalleryImagesQuery,d=(o.useFetchGalleryImageByIdQuery,o.useCreateGalleryImgMutation);o.useLazyFetchAllGalleryImagesQuery,o.useLazyFetchGalleryImageByIdQuery},8788:(e,n,t)=>{t.d(n,{p:()=>d});var r=t(8324),a=t(8023),i=function(){return i=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},i.apply(this,arguments)},s=r.BH.ARTICLES,c=r.BH.GALLERY,l=r.BH.LIKES,o=a.s.injectEndpoints({endpoints:function(e){return{toggleLike:e.mutation({query:function(e){var n=e.userId,t=e.likedItemId,r=e.endpoint;return{url:"".concat(r).concat(l),method:"POST",body:i(i({userId:n},r===s&&{articleId:t}),r===c&&{galleryimgId:t})}}})}}}).useToggleLikeMutation,u=t(6540),d=function(e,n,t,r){var a=o({fixedCacheKey:r+e}),i=a[0],s=a[1].data,c={userId:n||"",likedItemId:e,endpoint:r},l=(0,u.useState)(t),d=l[0],f=l[1];return(0,u.useEffect)((function(){s&&f(s.liked)}),[s]),{toggleLike:function(){return i(c)},liked:d,like:s}}},6327:(e,n,t)=>{function r(e,n){var t=Object.entries(e),r=Object.entries(n);if(t.length!==r.length)return!1;for(var a=0;a<t.length;++a)if(t[a][0]!==r[a][0]||t[a][1]!==r[a][1])return!1;return!0}t.d(n,{A:()=>r})},3049:(e,n,t)=>{t.d(n,{Y:()=>a});var r=["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"],a=function(e,n){var t=new Date(e),a=t.getDate(),i=t.getMonth(),s=t.getFullYear(),c=i<10?"0".concat(i+1):i+1,l=a<10?"0".concat(a):a;switch(n){case"text":return"".concat(a," ").concat(r[i],", ").concat(s);case"date":return"".concat(l,".").concat(c,".").concat(s)}}}}]);